<!DOCTYPE html>
<html data-ng-app="Tiny">
<head>
    <title>Ivo2U.nl</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ivo2U links">
    <meta name="author" content="Ivo Woltring">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
          integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <style type="text/css">
        body {
            padding-top: 70px;
            padding-bottom: 30px;
        }

        .theme-dropdown .dropdown-menu {
            position: static;
            display: block;
            margin-bottom: 20px;
        }

        .theme-showcase > p > .btn {
            margin: 5px 0;
        }

        .theme-showcase .navbar .container {
            width: auto;
        }

        .tooltipped {
            position: relative;
        }

        .tooltipped:after {
            position: absolute;
            z-index: 1000000;
            display: none;
            padding: 5px 8px;
            font: normal normal 11px/1.5 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
            color: #fff;
            text-align: center;
            text-decoration: none;
            text-shadow: none;
            text-transform: none;
            letter-spacing: normal;
            word-wrap: break-word;
            white-space: pre;
            pointer-events: none;
            content: attr(aria-label);
            background: rgba(0, 0, 0, 0.8);
            border-radius: 3px;
            -webkit-font-smoothing: subpixel-antialiased
        }

        .tooltipped:before {
            position: absolute;
            z-index: 1000001;
            display: none;
            width: 0;
            height: 0;
            color: rgba(0, 0, 0, 0.8);
            pointer-events: none;
            content: "";
            border: 5px solid transparent
        }

        .tooltipped:hover:before, .tooltipped:hover:after, .tooltipped:active:before, .tooltipped:active:after, .tooltipped:focus:before, .tooltipped:focus:after {
            display: inline-block;
            text-decoration: none
        }

        .tooltipped-multiline:hover:after, .tooltipped-multiline:active:after, .tooltipped-multiline:focus:after {
            display: table-cell
        }

        .tooltipped-s:after, .tooltipped-se:after, .tooltipped-sw:after {
            top: 100%;
            right: 50%;
            margin-top: 5px
        }

        .tooltipped-s:before, .tooltipped-se:before, .tooltipped-sw:before {
            top: auto;
            right: 50%;
            bottom: -5px;
            margin-right: -5px;
            border-bottom-color: rgba(0, 0, 0, 0.8)
        }

        .black_overlay {
            display: block;
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 1001;
            -moz-opacity: 0.8;
            opacity: .80;
            filter: alpha(opacity=80);
        }

        .white_content {
            display: block;
            position: absolute;
            top: 25%;
            left: 25%;
            width: 50%;
            height: 50%;
            padding: 16px;
            border: 16px solid #4776cc;
            background-color: white;
            z-index: 1002;
            overflow: auto;
            text-align: left;
        }

        .copied::after {
            position: relative;
            top: 5%;
            right: 110%;
            display: block;
            content: "copied";
            font-size: 1em;
            padding: 2px 3px;
            color: #fff;
            background-color: #22a;
            border-radius: 3px;
            opacity: 0;
            will-change: opacity, transform;
            animation: showcopied 1.5s ease;
        }

        @keyframes showcopied {
            0% {
                opacity: 0;
                transform: translateX(100%);
            }
            70% {
                opacity: 1;
                transform: translateX(0);
            }
            100% {
                opacity: 0;
            }
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
    </style>
</head>
<body role="document">
<div ng-controller="TinyController as tiny">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Ivo2U</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="http://ivo2u.nl/Wg">Contact</a></li>
                    <li><a href="#" ng-click="tiny.disclaimer = true">Disclaimer</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container theme-showcase" role="main">
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">URL 2 shorten</h3>
                    </div>
                    <div class="panel-body">
                        <form name="myForm" ng-submit="tiny.submit()" role="form">
                            <div class="form-group">
                                <input type="text"
                                       ng-model="tiny.url"
                                       name="url"
                                       class="form-control"
                                       required="required"
                                       ng-required="true"
                                       ng-pattern="/\b((?:[Hh][Tt][Tt][Pp][Ss]?)://[\w/#~:.?+=&%@!\-]+?)(?=[.:?\-]*(?:[^\w/#~:.?+=&%@!\-]|$))/"
                                />
                            </div>
                            <div class="form-group">
                                <input class="btn btn-primary" type="submit" value="Submit"
                                       ng-disabled="(myForm.url.$error.required && myForm.url.$dirty) || myForm.url.length==0"/>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Result</h3>
                    </div>
                    <div class="panel-body">
                        <div ng-show="tiny.data.length>0">
                            <div class="form-group">
                                <input id="copyUrl" value="{{tiny.data}}" class="form-control">
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" ngclipboard ngclipboard-success="tiny.onSuccess(e);"
                                        ngclipboard-error="tiny.onError(e);" data-clipboard-action="copy"
                                        data-clipboard-target="#copyUrl">
                                    Copy 2 Clipboard
                                </button>
                            </div>
                        </div>
                        <div ng-hide="tiny.data.length>0">
                            Result will be shown here...
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Top 5</h3>
                    </div>
                    <div class="panel-body">
                        <div ng-controller="Popular as top">
                            <table>
                                <tbody>
                                <tr ng-repeat="token in top.data.tokens">
                                    <td>
                                        <a href="{{token.tinyUrl}}" target="_blank">{{token.destinationUrl |
                                            max_url}}</a>
                                    </td>
                                    <td>{{token.counter}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="light" class="white_content" ng-show="tiny.disclaimer">
        <p>Disclaimer:</p>
        <p>The information contained in this website is for general information purposes only. We make no
            representations or warranties of any kind, express or implied, about the completeness, accuracy,
            reliability,
            suitability or availability with respect to the website or the information, products, services, or related
            graphics contained on the website for any purpose. Any reliance you place on such information is therefore
            strictly at your own risk.</p>

        <p>In no event will we be liable for any loss or damage including without limitation, indirect or consequential
            loss
            or damage, or any loss or damage whatsoever arising from loss of data or profits arising out of, or in
            connection with, the use of this website.</p>

        <p>Through this website you are able to link to other websites which are not under the control of ivo2u.nl.
            We have no control over the nature, content and availability of those sites. The inclusion of any links does
            not
            in any way imply a recommendation or endorse the views expressed within them.</p>

        <p>We reserve the right, at our discretion, to change, modify, add, or remove anything of the site and or its
            data
            at any time.</p>

        <p>We reserve the right to change these terms and conditions at any time, and you agree to abide by the most
            recent
            version of this Terms of Use Agreement each time you view and use the Website. You are accordingly advised
            to
            consult the Terms of Use Agreement each time you view and use the Website. Do not use the Website if you do
            not
            agree to all of the following terms and conditions.</p>

        <a href="javascript:void(0)" ng-click="tiny.disclaimer = false">Close</a>
    </div>
    <div id="fade" class="black_overlay" ng-show="disclaimer.show"></div>
</div>

<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"></script>
<script type="text/javascript">

    (function () {
        'use strict';
        var MODULE_NAME = 'ngclipboard';
        var angular, Clipboard;

        if (typeof module !== 'undefined' && typeof module.exports === 'object') {
            angular = require('angular');
            Clipboard = require('clipboard');
            module.exports = MODULE_NAME;
        } else {
            angular = window.angular;
            Clipboard = window.Clipboard;
        }

        angular.module(MODULE_NAME, []).directive('ngclipboard', function () {
            return {
                restrict: 'A',
                scope: {
                    ngclipboardSuccess: '&',
                    ngclipboardError: '&'
                },
                link: function (scope, element) {
                    var clipboard = new Clipboard(element[0]);

                    clipboard.on('success', function (e) {
                        scope.ngclipboardSuccess({
                            e: e
                        });
                    });

                    clipboard.on('error', function (e) {
                        scope.ngclipboardError({
                            e: e
                        });
                    });

                }
            };
        });
    }());

    (function () {
        angular.module('Tiny', ['ngclipboard']);
        angular.module('Tiny').controller("Popular", Popular);

        Popular.$inject = [
            '$http'
        ];

        function Popular($http) {
            var vm = this;
            $http({
                url: 'http://ivo2u.nl/popular',
                method: "GET",
                headers: {'Accept': 'application/json'}
            }).success(function (data, status, headers, config) {
                vm.data = data;
            }).error(function (data, status, headers, config) {
                vm.data = status;
            });
        }

        angular.module('Tiny').controller("TinyController", TinyController).filter('max_url', function ($window) {
            return function (str) {
                var n = 120;
                if ($window.innerWidth <= 320) {
                    n = 25;
                } else if ($window.innerWidth <= 375) {
                    n = 32;
                } else if ($window.innerWidth <= 414) {
                    n = 40;
                } else if ($window.innerWidth <= 768) {
                    n = 65;
                } else if ($window.innerWidth <= 800) {
                    n = 70;
                }
                return str.length > n ? str.substr(0, n - 1) + '...' : str;
            }
        });

        TinyController.$inject = [
            '$http'
        ];
        function TinyController($http) {
            var vm = this;
            vm.url = "";
            vm.data = "";
            vm.disclaimer = false;
            vm.submit = function () {
                $http({
                    url: 'http://ivo2u.nl/api/',
                    method: "POST",
                    data: vm.url,
                    headers: {'Content-Type': 'text/plain', 'Accept': 'text/plain'}
                }).success(function (data, status, headers, config) {
                    vm.data = data;
                }).error(function (data, status, headers, config) {
                    vm.data = status;
                });
            };

            vm.onSuccess = function (e) {
                e.clearSelection();

                console.info('Action:', e.action);
                console.info('Text:', e.text);
                console.info('Trigger:', e.trigger);

                showTooltip(e.trigger, 'Copied!');
            };

            vm.onError = function (e) {
                console.error('Action:', e.action);
                console.error('Trigger:', e.trigger);

                showTooltip(e.trigger, fallbackMessage(e.action));
            };

            function showTooltip(elem, msg) {
                elem.setAttribute('class', 'btn btn-primary tooltipped tooltipped-s');
                elem.setAttribute('aria-label', msg);
            }

            function fallbackMessage(action) {
                var actionMsg = '';
                var actionKey = (action === 'cut' ? 'X' : 'C');

                if (/iPhone|iPad/i.test(navigator.userAgent)) {
                    actionMsg = 'No support :(';
                }
                else if (/Mac/i.test(navigator.userAgent)) {
                    actionMsg = 'Press ⌘-' + actionKey + ' to ' + action;
                }
                else {
                    actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
                }

                return actionMsg;
            }

        }
    })();

    (function () {
        var btns = document.querySelectorAll('.btn');

        for (var i = 0; i < btns.length; i++) {
            btns[i].addEventListener('mouseleave', function (e) {
                e.currentTarget.setAttribute('class', 'btn btn-primary');
                e.currentTarget.removeAttribute('aria-label');
            });
        }

    })();
</script>

</body>
</html>
